= Pallas Text index测试计划
:doctype: article
:encoding: utf-8
:lang: zh
:toc:
:numbered:


## 编写时间

2019-06-17

## 测试版本

linkoopdb-2.0.0.245-20190617

## 测试时间

2019-06-17至2019-06-18

## 测试内容

测试pallas全文索引即倒排索引 +
https://github.com/datapps/linkoopdb/issues/1299

## 测试思路

### 1.测试查看分词结果的函数ft_split(source,isFile)

<1>.当未启动pallas时，能否执行ft_split函数 +

<2>.当source为字符串时，其字符串里包含中英文，特殊字符等，分词是否正确 +

<3>.当source为文本时，分词是否正确 +

<4>.当不写第二个参数时，分别测试source为字符串和文本时，是否报错 +

### 2.测试pallas全文索引

<1>.测试在除了varchar类型外其他数据类型列是否能创建全文索引 +

<2>.测试创建多列的全文索引（其中包括各种数据类型） +

<3>.测试在hdfs表上创建全文索引，查看是否能创建成功 +

<4>.测试contains过滤器的第一个参数为全文索引的列和不为全文索引的列时，是否能执行成功，且结果是否正确 +

<5>.测试contains过滤器的第二个参数如果不包含逻辑操作符，检索目标分别用单引号、双引号、单双引号混合的方式括起来，测试是否能执行成功，且结果是否正确 +

<6>.测试全文索引中的完全匹配和前缀匹配 +

<7>.测试contains过滤器中第二个参数中包含多个and和or的操作符，测试能否执行成功，且结果是否正确 +

<8>.测试多查询条件的情况，如同时存在普通索引跟全文索引，普通索引跟全文索引是相同的列，普通索引中包含全文索引的列 +

## 测试可能遇到的问题

* 若测试的检索目标没有在分词的字典中，则会得不到结果，需要在/linkoopdb_current/bin目录中的jieba.user.dict.utf8中添加需要检索的字符，且原来的索引需要删除重建，数据也需重新创建
